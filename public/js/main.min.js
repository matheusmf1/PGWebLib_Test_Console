
(()=>{var projectContainers=document.querySelectorAll('.modal__trigger').forEach(trigger=>{trigger.addEventListener('click',(e)=>{var deleteIcons=document.querySelectorAll('.project__container--delete');deleteIcons.forEach(i=>i.classList.remove('project__icon-show'));});});var projectCloses=document.querySelectorAll('.modal__close').forEach(close=>{close.addEventListener('click',()=>{var deleteIcons=document.querySelectorAll('.project__container--delete');deleteIcons.forEach(i=>i.classList.add('project__icon-show'))});});})();

(()=>{const projectDelete=document.querySelectorAll('.project__container--delete').forEach(project=>{project.addEventListener('click',()=>{const projectName=project.nextElementSibling.text;console.log('project:',projectName)
const findSection=document.querySelector('main section');findSection.innerHTML="";let sectionContainer=document.createElement('section');sectionContainer.className="delete__container";let deleteForm=document.createElement('div');deleteForm.className='delete__content';let warningsContainer=document.createElement('div');warningsContainer.className='warnings__container';let messageTitle=document.createElement('h1');messageTitle.innerHTML=`Apagar ${projectName}`;messageTitle.className='delete__container--title '
let messageContent=document.createElement('p');messageContent.innerHTML='Você tem certeza que quer pagar tal projeto e suas validações?';messageContent.className='delete__container--content ';let buttonsContainer=document.createElement('div');buttonsContainer.className='buttons__container';let anchor=document.createElement('a');anchor.href='';anchor.className='button__deleteModal cancel__button';anchor.innerHTML='Cancelar';let deletelBt=document.createElement('button');deletelBt.type='submit';deletelBt.addEventListener('click',async()=>{await fetch(`/main/projs/${projectName}`,{method:'DELETE',headers:{'Content-Type':'application/json'},mode:'cors'}).then((response)=>{return response.json();}).then((resp)=>{console.log('Status',resp);window.location.href="";}).catch((err)=>{console.log('Erro Fetch',err);});});deletelBt.className='button__deleteModal delete__button';deletelBt.innerHTML='Apagar';buttonsContainer.appendChild(anchor);buttonsContainer.appendChild(deletelBt);warningsContainer.appendChild(messageTitle);warningsContainer.appendChild(messageContent);warningsContainer.appendChild(buttonsContainer);deleteForm.appendChild(warningsContainer);sectionContainer.appendChild(deleteForm);findSection.appendChild(sectionContainer)});});})();

const Modal=(function(){var trigger=$qsa('.modal__trigger');var modals=$qsa('.modal__container');var content=$qsa('.modal__content');var closers=$qsa('.modal__close');var w=window;var isOpen=false;var contentDelay=400;var len=trigger.length;function $qsa(el){return document.querySelectorAll(el);}
var getId=function(event){''.toLowerCase
event.preventDefault();var self=this;var modalId=self.dataset.modal;var len=modalId.length;var modalIdTrimmed=modalId.substring(1,len);var modal=document.getElementById(modalIdTrimmed);makeDiv(self,modal);};var makeDiv=function(self,modal){var fakediv=document.getElementById('modal__temp');if(fakediv===null){var div=document.createElement('div');div.id='modal__temp';self.appendChild(div);moveTrig(self,modal,div);}};var moveTrig=function(trig,modal,div){var trigProps=trig.getBoundingClientRect();var m=modal;var mProps=m.querySelector('.modal__content').getBoundingClientRect();var transX,transY,scaleX,scaleY;var xc=w.innerWidth/2;var yc=w.innerHeight/2;trig.classList.add('modal__trigger--active');scaleX=mProps.width/trigProps.width;scaleY=mProps.height/trigProps.height;scaleX=scaleX.toFixed(3);scaleY=scaleY.toFixed(3);transX=Math.round(xc-trigProps.left-trigProps.width/2);transY=Math.round(yc-trigProps.top-trigProps.height/2);if(m.classList.contains('modal--align-top')){transY=Math.round(mProps.height/2+mProps.top-trigProps.top-trigProps.height/2);}
trig.style.transform='translate('+transX+'px, '+transY+'px)';trig.style.webkitTransform='translate('+transX+'px, '+transY+'px)';div.style.transform='scale('+scaleX+','+scaleY+')';div.style.webkitTransform='scale('+scaleX+','+scaleY+')';window.setTimeout(function(){window.requestAnimationFrame(function(){open(m,div);});},contentDelay);};var open=(m,div)=>{if(!isOpen){var content=m.querySelector('.modal__content');m.classList.add('modal__container--active');content.classList.add('modal__content--active');content.addEventListener('transitionend',hideDiv,false);isOpen=true;}
function hideDiv(){div.style.opacity='0';content.removeEventListener('transitionend',hideDiv,false);}};var close=(event)=>{event.preventDefault();event.stopImmediatePropagation();var target=event.target;var div=document.getElementById('modal__temp');if(isOpen&&target.classList.contains('modal__bg')||target.classList.contains('modal__close')){div.style.opacity='1';div.removeAttribute('style');for(var i=0;i<len;i++){modals[i].classList.remove('modal__container--active');content[i].classList.remove('modal__content--active');trigger[i].style.transform='none';trigger[i].style.webkitTransform='none';trigger[i].classList.remove('modal__trigger--active');}
div.addEventListener('transitionend',removeDiv,false);isOpen=false;}
function removeDiv(){setTimeout(function(){window.requestAnimationFrame(function(){div.remove();});},contentDelay-50);}};var bindActions=function(){for(var i=0;i<len;i++){trigger[i].addEventListener('click',getId,false);closers[i].addEventListener('click',close,false);}};var init=function(){bindActions();};return{init:init};}());Modal.init();

(()=>{const openValidation=document.querySelectorAll('.card__container').forEach(item=>{item.addEventListener('click',async()=>{let projTitle=item.parentNode.parentNode.parentNode.children[0].innerHTML;let valTitle=item.querySelector('.card__content--text').innerHTML;await window.open(`/main/validation/${projTitle}/${valTitle}`,'_blank');});});})();

(()=>{const startApp=window.addEventListener('load',async()=>{console.log('page has loaded')
await fetch('/settings',{method:'post'}).then((response)=>{console.log('response ',response);return response;}).catch((resp)=>console.log('resp: ',resp));});window.addEventListener('load',async()=>{const setupFeedBack=setInterval(async()=>{await fetch('/settings/setup',{method:'GET',headers:{'Content-Type':'application/json'},mode:'cors'}).then((response)=>{return response.json();}).then((resp)=>{console.log('setupOk',resp);if(resp.ok===true){alert('Aplicação Inicializada com Sucesso!');clearInterval(setupFeedBack);}else if(resp.ok===false){alert('Aplicação Não Inicializada!');}}).catch((err)=>{console.log('Erro Fetch setupOk',err);});},2000);});})();